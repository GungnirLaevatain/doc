# 1 类的生命周期
类从被加载进虚拟机内存，到被从内存中卸载，其生命周期分为以下几个阶段：
加载、验证、准备、解析、初始化、使用、卸载，其中验证、准备、解析统称为连接
## 1.1 加载
在此阶段，为了将类加载入虚拟机内存，虚拟机需要进行以下操作：
1. 通过类限定名读入该类的二进制字节流
2. 将该字节流转化为元数据区存储类信息对应的数据结构
3. 为该类生成class对象，作为外部访问的入口
## 1.2 验证
该阶段作为连接的第一个步骤，主要是验证类字节流的正确性和合法性，避免危害虚拟机自身安全。
其验证步骤包含以下几步：
1. 文件格式验证：确保该字节流符合class文件格式，同时可被当前版本的虚拟机使用
2. 元数据验证：主要是对内容的语法进行分析，确定其符合java语法规范
3. 字节码验证：主要是对内容的语义进行分析，保证其语义的是合法、符合逻辑的，避免产生不安全的操作
4. 符号引用验证：主要是对类自身以外的信息进行匹配性校验
## 1.3 准备
该阶段主要是为类变量分配内存，并设置类变量（非final修饰）的初始值即零值
## 1.4 解析
该阶段是将之前类定义的符号引用替换为直接饮用
## 1.5 初始化
该阶段为类加载的最后一步，主要是执行类构造器<clinit>()方法
## 1.6 使用
在工作线程中使用该类信息
## 1.7 卸载
当类满足以下条件时，可被垃圾回收：
1. 加载该类的ClassLoader被回收
2. 不存在该类的实例化对象，
3. 该类对应的Class对象没有任何地方被引用，无法在任何地方通过反射访问该类的方法
# 2 类加载器
## 2.1 Java默认的类加载器类别
1. 启动类加载器（Bootstrap ClassLoader）：根加载器，用于加载基础类库
2. 扩展类加载器（Extension ClassLoader）：用于加载ext目录下的扩展类库
3. 应用程序类加载器（Application ClassLoader）：用于加载应用程序ClassPath下则类库
## 2.2 双亲委派模型
其主要流程便是:当子类加载器收到类加载请求时，其会先判断自身是否已加载过该类，若有直接返回，反之则将请求上送
至父加载器中，直至最顶层的类加载器，直至该类加载器反馈无法加载该类时，其子加载器才会尝试加载。  
因此这种模型可以保证Java自身类库的类最先被加载，避免被恶意外部类覆盖，从而保证程序的稳定性